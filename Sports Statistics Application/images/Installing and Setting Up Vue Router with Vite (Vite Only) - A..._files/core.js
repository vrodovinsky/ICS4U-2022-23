(function(){let e,t,n=this,r=n.document;if(n.sndefine)e=n.sndefine.cleanWindow,t=n.sndefine.root;else{let n=r.body||r.head;n.insertAdjacentHTML("beforeend",'<iframe style="display:none!important" aria-hidden="true"></iframe>'),e=n.lastElementChild.contentWindow,t=r.currentScript.src.substr(0,r.currentScript.src.lastIndexOf("/")+1)}let i="";if(!t.includes("local.sleeknote.com")){let e=r.currentScript.src.split("/").pop().split(".")[0];i=(e.split("-")[1]||"production")+"/"}let s=new e.URL(n.location),a=new e.URLSearchParams(s.search);if(a.has("snhide"))return;let o=r.currentScript.src.split("#")[1]||"SleekNote",l=a.has("snlocal"),c=a.get("snbranch");if(l||c){let t=r.createElement("script");return t.charset="utf-8",l?(a.delete("snlocal"),t.src="https://local.sleeknote.com"):(a.delete("snbranch"),t.src="https://core-branches.sleeknote.com/branch-"+c),n.history.replaceState(null,null,r.location.origin+r.location.pathname+"?"+a.toString()),t.src+="/frontend2/core.js#"+o,r.head.appendChild(t),void e.frameElement.parentElement.removeChild(e.frameElement)}let d,u=!0;function f(e){e=e.map((e=>(e.NS=o,e))),n.sndefine.SleekNotes.splice(0,0,...e)}if(n.sndefine)u=!1,n.sndefine.namespaces.add(o);else{let s=Object.create(null),a=Object.create(null);function p(n){let o=e.Promise.resolve();return s[n]||(o=new e.Promise(((e,s)=>{if(a[n])a[n].resolve.push(e),a[n].reject.push(s);else{a[n]={resolve:[e],reject:[s]};let o=r.createElement("script");o.src=t+i+(~n.indexOf(".js")?n:n+".js"),o.name=n,o.async=!0,o.charset="utf-8",r.head.appendChild(o),o.onload=function(){a[n].resolve.forEach((e=>{e()}))},o.onerror=function(e){throw a[n].reject.forEach((e=>{e()})),new Error("Error loading: "+e.currentTarget.src)}}}))),o.then((()=>s[n]))}function m(...t){var i="string"==typeof t[0]?t.shift():r.currentScript.name,a=Array.isArray(t[0])?t.shift():[],o=t[0];s[i]||(s[i]=e.Promise.resolve().then((()=>e.Promise.all(a.map(p)).then((e=>o.apply(n,e))))))}Object.defineProperties(m,{cleanWindow:{value:e},root:{value:t},namespaces:{value:new e.Set([o])},CustomInitSettings:{value:{}},DomainLimits:{value:{}},SleekNotes:{value:[]}}),Object.defineProperty(n,"sndefine",{value:m}),Object.defineProperty(n,"arequire",{value:function(t){return new e.Promise((n=>{!function(t,n){e.Promise.all(t.map(p)).then((e=>{n&&n.apply(this,e)}))}([t],(function(e){return n(e)}))}))}}),d=s}let h=Array.isArray(n[o])?n[o].pop():n[o];if(h)for(let[e,t]of Object.entries(h))"SleekNotes"==e?a.has("snpreview")||f(t):"object"==typeof t&&t?(n.sndefine[e]||(n.sndefine[e]={}),Object.assign(n.sndefine[e],t)):void 0!==t&&(n.sndefine[e]=t);function g(e){if("SleekNote"==e&&!a.has("snpreview")){let e=n.sndefine.HideSleeknoteBadge;if(void 0===e&&(e=!0),!e&&n.sndefine.CustomerId>=790)return!0}}function v(){return n.sndefine.DomainLimits}async function b(e,t,r,i,s){n[o]&&!n[o].API&&(n[o].API=Promise.resolve(r),n[o].triggerOnClick=n[o].triggerOnclick=(...e)=>n[o].API.then((t=>t.call(t,"launch",...e)))),s.initialize(n.sndefine.namespaces),(await i.add(n.sndefine.SleekNotes)).length||await n.arequire("package-tracker"),await e(t.CORE.EVENTS.LOAD,{NS:o,command:function(){try{return r.apply(null,arguments)}catch(e){console.warn("Error calling API",e)}}})}u&&(d.global=e.Promise.resolve().then((()=>new e.Proxy({},{get(t,n){let r=e[n];return"fetch"==n&&(r=r.bind(e)),"FormData"==n&&(r=r.bind(e)),r}}))),d["core-sleeknote"]=e.Promise.resolve().then((()=>{n.dev||(n.dev=Object.create(null));let e=Object.fromEntries(a.entries()),r={isSubscribedFromQuery:"true"==e.SNSubscribed||"drip"==e.utm_source&&"email"==e.utm_medium,debug:e.sndebug||e.sleeknote_debug&&"1"||"",reset:e.snreset,editor:e.sneditor,preview:e.snpreview,timestamp:"?"+(Number("{{sleekNotetimestamp}}")||""),getBase:()=>t+i,local:t.includes("local."),custom(e,t){var r=n.sndefine.CustomInitSettings[e];return r||t},hasCustomProp:e=>e in n.sndefine.CustomInitSettings,expose:(e,t)=>(n.dev[t]=e,e),hooks:{},eventName:"eve"+ +new Date,isDripURL:"SleekNote"!=o,needBadge:g(o),getDomainLimits:v};return r.preview&&(r.mergeId=void 0===e.snmergeid?0:e.snmergeid),r}))),u?n.arequire("package-core-boot").then((async function({launcher:e,coreConfig:n,emit:r,API:s,CONST:a,storage:o,B:l,siteData:c}){let d=this;await o.postCreate(),(n.local||n.reset)&&"n"!=n.reset&&await o.forceResetSession(n.reset),n.preview&&await d.Promise.all([import(t+i+"preview-utils.js"),import(t+i+"preview-toolbar.js")]).then((async function(e){let[{default:t},{default:r}]=e,i=await t.fetchHTMLConfig(n.preview);f(i),l.is.desktop&&r(i[0],n)})),function(){try{return d.location!==d.parent.location}catch(e){}}()&&d.parent.postMessage(d.JSON.stringify({fingerprint:"SleekNote",command:"core-loaded"}),"*"),b(r,a,s,e,c)})):n.arequire("package-core-boot").then((async function({launcher:e,coreConfig:t,emit:n,API:r,CONST:i,storage:s,B:a,siteData:o}){await s.postCreate(),t.needBadge=!1,b(n,i,r,e,o)}))}).call(this);