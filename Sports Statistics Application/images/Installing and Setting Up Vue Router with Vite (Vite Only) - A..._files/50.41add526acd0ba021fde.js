(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{12:function(e,o,t){"use strict";function s(e,o,t,s,l,n,i,r){var a,u="function"==typeof e?e.options:e;if(o&&(u.render=o,u.staticRenderFns=t,u._compiled=!0),s&&(u.functional=!0),n&&(u._scopeId="data-v-"+n),i?(a=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),l&&l.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=a):l&&(a=r?function(){l.call(this,this.$root.$options.shadowRoot)}:l),a)if(u.functional){u._injectStyles=a;var d=u.render;u.render=function(e,o){return a.call(o),d(e,o)}}else{var c=u.beforeCreate;u.beforeCreate=c?[].concat(c,a):[a]}return{exports:e,options:u}}t.d(o,"a",function(){return s})},918:function(e,o,t){"use strict";t.r(o);var s=t(11),l=t.n(s),n=t(17),i=t.n(n),r=t(23);window.Vueschool.guest=!Object(r.get)(window.Vueschool,"user",!1);var a={name:"FollowCourseButton",props:{course:{type:Object,required:!0},classes:{type:[Array,String],default:()=>["btn","shadow-none","text-white"]},showDescription:{type:Boolean,default:!1},followText:{type:String,default:"Follow"},unfollowText:{type:String,default:"Unfollow"}},data:()=>({loading:!1,errored:!1,followedCourses:[]}),computed:{title(){return`${this.label} ${this.course.title}`},label(){return this.shouldFollow?this.followText:this.unfollowText},route(){const e=!0===this.shouldFollow?"follow":"unfollow";return`/api/courses/${this.course.id}/${e}`},shouldFollow(){return!this.followedCourses.find(e=>e.id===this.course.id)}},mounted(){this.followedCourses=Object(r.get)(window.Vueschool,"followings.courses",[])},methods:{handleButton(){if(!this.loading){if(window.Vueschool.guest){const e=()=>{window.Vueschool.guest=!1,this.handleButton()};return this.$modal.show("RegistrationModal",{closable:!0,loginLinkCallback:e,onSuccess:e})}this.shouldFollow?this.follow():this.unfollow()}},follow(){this.loading=!0,l.a.post(this.route).then(({data:e})=>{e.success&&(i()("Course followed!",`You are now following the course: ${this.course.title}.`,"success"),this.followedCourses.push({id:this.course.id,title:this.course.title}))}).catch(({response:e})=>{Object(r.get)(e,"data.error.message")&&i()("Ooops",e.data.error.message,"error")}).finally(()=>this.loading=!1)},unfollow(){this.loading=!0,l.a.post(this.route).then(({data:e})=>{if(e.success){i()("Course unfollowed!",`You are no longer following course: ${this.course.title}.`,"success");const e=this.followedCourses.findIndex(e=>e.id===this.course.id);this.followedCourses.splice(e,1)}}).catch(({response:e})=>{Object(r.get)(e,"data.error.message")&&i()("Ooops",e.data.error.message,"error")}).finally(()=>this.loading=!1)}}},u=t(12),d=Object(u.a)(a,function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{directives:[{name:"show",rawName:"v-show",value:!e.errored,expression:"!errored"}]},[t("a",{class:e.classes,attrs:{href:"#",title:e.title},on:{click:function(o){return o.preventDefault(),e.handleButton(o)}}},[t("i",{class:{"far fa-star":!e.loading&&e.shouldFollow,"fas fa-star":!e.loading&&!e.shouldFollow,"far fa-spinner fa-spin":e.loading}}),e._v("\n    "+e._s(e.label)+"\n  ")]),e._v(" "),t("p",{directives:[{name:"show",rawName:"v-show",value:e.showDescription,expression:"showDescription"}],staticClass:"text-sm text-grey"},[e._v("You will receive a notification to your email when a new lesson is published.")])])},[],!1,null,"4fdc60af",null);o.default=d.exports}}]);
//# sourceMappingURL=~/bundles/50.41add526acd0ba021fde.js.map